<!DOCTYPE html>
<html lang="en-US">
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
<script src="http://localhost:3000/socket.io/socket.io.js"></script>
<body>

<div ng-app="myApp" ng-controller="myCtrl">
    <button ng-click = "tracking('true')">Start tracking</button>
    <button ng-click = "tracking('false')">Stop tracking</button>
    <h1>Servo pos</h1>
    <button ng-click = "servo(0)">0</button><br>
    <button ng-click = "servo(45)">45</button><br>
    <button ng-click = "servo(135)">135</button><br>
    <button ng-click = "servo(180)">180</button><br>

    <h1>Servo poz : {{ser}}</h1>
</div>

<script>
    var app = angular.module("myApp", []); 

    const socket = io('http://localhost:3000');

    app.config(['$qProvider', function ($qProvider) {
    $qProvider.errorOnUnhandledRejections(false);
}]);

    app.controller("myCtrl", function($scope, $http, $window) {

        $scope.ser = 90;

        socket.on('newdata', (data) => {
            console.log(data);
            $scope.ser = data.servo;
        });

       $scope.tracking = function(val){
           $http.post("http://localhost:3000/tracking/"+val)
                .then(function(response){
                    console.log(response.data);
                });
       }
       $scope.servo = function(val){
           $http.post("http://localhost:3000/add/"+val)
                .then(function(response){
                    console.log(response.data);
                });
       }
    });
</script>

</body>
</html>